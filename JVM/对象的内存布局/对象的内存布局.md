# 大纲



# 前言

在HotSpot中，对象在内存中存储的布局可以分为三个区域：

- 对象头
- 实例数据
- 对齐填充

下面我们就挨个说下这三个东西到底是啥，有啥东西

一定要重点注意第一个对象头里的东西，因为讲并发时**锁优化**还有**对象创建**会用到这个

# 对象头

对象头里存两个部分的信息

- 运行时数据(Mark Word)
- 类型指针(Class Pointer)

## 运行时数据

这里主要存对象自身的运行时数据，比如

- 哈希码
- GC分代年龄
- 锁状态标志
- 线程持有的锁
- 偏向线程ID
- 偏向时间戳
- 等…..

用图看下就知道了

![](img/Xnip2019-06-10_20-54-46.jpg)

## 长度

- 对象是数组类型
  - 3字宽(32位虚拟机中，一字宽=4字节=32bit;64位虚拟机乘2)
- 费数组类型
  - 2字宽(不同虚拟机位数，同上)